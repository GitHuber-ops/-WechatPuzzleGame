(this["webpackJsonpjigsaw-puzzle"]=this["webpackJsonpjigsaw-puzzle"]||[]).push([[0],[,,,,,,,,function(e,a,t){e.exports=t(19)},,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(5),i=t.n(c),s=(t(13),t(1)),o=t(2),l=t(3),u=new(function(){function e(a,t){Object(o.a)(this,e),this.imgSrc=void 0,this.sliceNum=void 0,this.pieceStates=void 0,this.imgSrc=a,this.sliceNum=t,this.pieceStates=new Array(t);for(var n=0;n<t;n++){this.pieceStates[n]=new Array(t);for(var r=0;r<t;r++)this.pieceStates[n][r]={setIsDropped:void 0,isFinished:!1}}}return Object(l.a)(e,[{key:"useIsDropped",value:function(e,a){var t=Object(n.useState)(!1),r=Object(s.a)(t,2),c=r[0],i=r[1];return this.pieceStates[e][a].setIsDropped=i,c}}]),e}())("puzzle.png",4),m=t(7),p=t(6),f=function(e){Object(m.a)(t,e);var a=Object(p.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).canvasRef=void 0,n.image=void 0,e.canvasRef?n.canvasRef=e.canvasRef:n.canvasRef=r.a.createRef(),n.image=new Image,n}return Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=this.canvasRef.current;if(null!==a){var t=a.getContext("2d");null!==t?(this.image.onload=function(){e.props.drawFunc(t,e.image)},this.image.src=this.props.imgSrc):console.error("CANVAS UNSPPORT")}else console.error("CANVAS ERF IS NULL")}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return r.a.createElement("canvas",{ref:this.canvasRef,className:this.props.className,width:this.props.width,height:this.props.height})}}]),t}(r.a.Component);var v=function(e){var a=u.sliceNum;return r.a.createElement(f,{className:e.className,imgSrc:u.imgSrc,drawFunc:function(t,n){var r=n.width/a;t.drawImage(n,e.x*r,e.y*r,n.width/a,n.height/a,0,0,300,300)},width:300,height:300,canvasRef:e.canvasRef})};t(14);var d=function(e){var a=Object(n.useState)(!1),t=Object(s.a)(a,2),c=t[0],i=t[1];return u.useIsDropped(e.x,e.y)?null:r.a.createElement("div",{onDragStart:function(a){a.dataTransfer.setData("game/piece-coordinate",JSON.stringify({x:e.x,y:e.y})),a.dataTransfer.dropEffect="move",setTimeout((function(){i(!0)}),1)},onDragEnd:function(e){i(!1)},draggable:"true",className:e.className},r.a.createElement(v,{x:e.x,y:e.y,className:["Draggable-piece",c?"Draggable-piece-hide":void 0].join(" ")}))};t(15);var h=function(e){var a=u.sliceNum,t=function(e){for(var a=[],t=0;t<e;t++)for(var n=0;n<e;n++)a.push({x:t,y:n});return a}(a);!function(e){for(var a=e.length-1;a>0;a--){var t=Math.floor(Math.random()*(a+1)),n=[e[t],e[a]];e[a]=n[0],e[t]=n[1]}}(t);var n,c=t.map((function(e){return r.a.createElement(d,{x:e.x,y:e.y,key:JSON.stringify(e),className:"Piece-list-piece"})})),i={};return n=document.body.clientWidth/document.body.clientHeight>2/3?"calc(60vh / ".concat(a,")"):"calc(90vw / ".concat(a,")"),i.height=n,r.a.createElement("div",{style:i,className:"Jigsaw-piece-list"},c)};t(16);var g=function(e){var a=Object(n.useState)(!0),t=Object(s.a)(a,2),c=t[0],i=t[1];return r.a.createElement("div",{onDragOver:function(e){e.preventDefault()},onDrop:function(a){var t=a.dataTransfer.getData("game/piece-coordinate"),n=JSON.parse(t);if(n.x===e.x&&n.y===e.y){i(!1);var r=u.pieceStates[e.x][e.y].setIsDropped;r&&r(!0)}},className:"Droppable-piece".concat(c?" Droppable-piece-hide":"")},r.a.createElement(v,{x:e.x,y:e.y,className:"Droppable-piece-canvas"}))};t(17);var y=function(e){var a=u.sliceNum,t=function(e){for(var a=[],t=0;t<e;t++)for(var n=0;n<e;n++)a.push({x:n,y:t});return a}(a).map((function(e){return r.a.createElement(g,{x:e.x,y:e.y,key:JSON.stringify(e)})})),n={gridTemplateColumns:"repeat(".concat(a,", minmax(0, 1fr))"),gridTemplateRows:"repeat(".concat(a,", minmax(0, 1fr))")};return r.a.createElement("div",{className:"Jigsaw-piece-grid",style:n},t)};t(18);var N=function(e){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"Game-title"},"\u62fc\u56fe\u5c0f\u6e38\u620f"),r.a.createElement("div",{className:"Game-container"},r.a.createElement(y,null)),r.a.createElement("div",{className:"Pieces-picker"},r.a.createElement(h,{className:"Jigsaw-piece"})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[8,1,2]]]);
//# sourceMappingURL=main.a86983b6.chunk.js.map